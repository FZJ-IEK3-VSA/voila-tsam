{%- extends 'lab/index.html.j2' -%}

{# this overrides the default behavior of directly starting the kernel and executing the notebook #}
{% block notebook_execute %}
{% endblock notebook_execute %}

{%- block html_head_css -%}
{{ super() }}

{{ resources.include_css("static/materialize.min.css") }}


<style type="text/css">
:root {
  --jp-layout-color0: #023d6b;
}


html, body {
    height: 100%;
}

body {
  overflow-y: scroll;
  font-family: arial;
  min-height: 100%;
}

footer {
  clear: both;
  position: relative;
  height: 130;
  margin-top: -130px;
  width: 99%;
  z-index: 9999; 
  background-color: white;
}


.nav-wrapper {
  background-color:#ffffff;
  color:#023d6b;
}


.top-nav {
  width: 99%;
}

nav .brand-logo {
    color:#023d6b;
    align-items: center;
  height: 100%;
}

body nav ul h1 {
    color:#023d6b;
}

body nav a {
    color:#023d6b;
}

#loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 75vh;
    color: #ffffff;
    font-family: sans-serif;
}

.spinner {
  animation: rotation 2s infinite linear;
  transform-origin: 50% 50%;
}

.spinner-container {
  width: 10%;
}

@keyframes rotation {
  from {transform: rotate(0deg);}
  to   {transform: rotate(359deg);}
}

.voila-spinner-color1{
  fill: #ffffff;
}

.voila-spinner-color2{
  fill: #b9d25f;
}

@font-face {
  font-family: 'Material Icons';
  font-style: normal;
  font-weight: 400;
  src: url({{resources.base_url}}voila/static/icons_font.ttf) format('truetype');
}

.p-Widget.jupyter-button.mod-success {
  background-color: #b9d25f;
}

.material-icons {
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  color: #023d6b;
}


/* Workaround for the Select/Dropdown widgets to be visible: */
select {
  display: block;
}
/* Workaround for the RadioButtons widgets to be visible: */
[type="radio"]:not(:checked), [type="radio"]:checked {
  position: static;
  opacity: 1;
  pointer-events: auto;
}

button:focus{
  background-color: #b9d25f;
}

.right {
  float: right;
  /*width: 25%;*/
  padding: 10px;
  /*margin-right: 30px;*/
}

.left{
  margin-left: 30px;
  float: left;
  width: 40%;
  padding: 10px;
}

.middle {
  float: left;
  width: 25%;
  padding: 10px;
}

.wrapper {
  min-height: 100%;
  margin-bottom: -119px;
  padding-bottom: 129px;
}

a.anchor-link {
  display: none;
}
.highlight  {
  margin: 0.4em;
}
</style>

{%- endblock html_head_css -%}

{%- block body -%}
{%- block body_header -%}
  {{ super() }}
  <header>
    <div class="navbar-fixed" style="height: 80px; z-index: 9999;">
      <nav class="top-nav" style="line-height: 80px; height: 80px;">
        <div class="nav-wrapper">
          <a href="#!" class="brand-logo center" style="font-weight: bold;">voila: tsam</a>
          <a href="https://www.fz-juelich.de/iek/iek-3/EN/Home/home_node.html" class="brand-logo right" target="_blank">
            <img class="brand-logo right" src="https://upload.wikimedia.org/wikipedia/commons/4/40/Logo_des_Forschungszentrums_J%C3%BClich_seit_2018.svg" style="margin-top: 15px; height: 65%; margin-right: 20px;"></img>
          </a>
          <ul class="brand-logo left" style="padding-top: 10px;">
            <li><a href="#"><i class="material-icons" id="kernel-status-icon">radio_button_unchecked</i></a></li>
          </ul>
        </div>
      </nav>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="row">
        <div class="col s12">
{%- endblock body_header -%}

{%- block body_loop -%}
          <div style="background-color: white;">
            {{ super() }}
          </div>
{%- endblock body_loop -%}

{%- block body_footer -%}
        </div>
      </div>
    </div>
  </main>
  <footer class="site-footer">
    <div class="row">
      <div class="left">
        <a target="_blank" href="https://fz-juelich.de/iek/iek-3/EN/Home/home_node.html" style="color: #023d6b; font-weight: bold;">© 2021 Forschungszentrum Jülich GmbH</a>
      </div>
          
      <div class="middle">
        <a target="_blank" href="http://www.metis-platform.net/metis-platform/EN/_ServicePages/Imprint/_node.html;jsessionid=FFAF99E7AD5DD644EC762EC0096E1C6E" style="color: #023d6b; font-weight: bold;">IMPRINT</a>&nbsp;&nbsp; 
          <a target="_blank" href="http://www.metis-platform.net/metis-platform/EN/_ServicePages/DataProtection/_node.html;jsessionid=FFAF99E7AD5DD644EC762EC0096E1C6E" style="color: #023d6b; font-weight: bold;">DATA PROTECTION</a>
      </div>
          
      <div class="right">
        <img style="float: right;" width=100px src="http://www.metis-platform.net/SiteGlobals/StyleBundles/Bilder/NeuesLayout/metis-platform/logo_bmwi.jpg;jsessionid=9B4BFB0C1F70114502022FFE13AF5A6E?__blob=normal">
        <a style="float: right;padding-right: 10px; padding-top: 20px;" href="http://www.metis-platform.net/">
          <img width=100px  src="https://www.wiwi.rwth-aachen.de/global/show_picture.asp?id=aaaaaaaaabczicn&w=842&q=77&meta=0" alt="Metis Logo">
        </a> 
        
      </div>
    </div>
  </footer>
  {{ super() }}

{%- endblock body_footer -%}

{%- endblock body -%}


{% block footer_js %}
  {{ super() }}  
  {{ resources.include_js("static/materialize.min.js") }}
  <script type="text/javascript">
    requirejs(['static/voila'], function(voila) {
      (async function() {
        var kernel = await voila.connectKernel();
        kernel.statusChanged.connect(() => {
          // console.log(kernel.status);
          var el = document.getElementById("kernel-status-icon");
          if (kernel.status == 'busy') {
            el.innerHTML = 'radio_button_checked';
          } else {
            el.innerHTML = 'radio_button_unchecked';
          }
        });
      })();
    });
  </script>
  <script>
  var voila_process = function(cell_index, cell_count) {
    var el = document.getElementById("loading_text")
    el.innerHTML = `Executing ${cell_index} of ${cell_count}`
  }
  </script>
{% endblock footer_js %}
